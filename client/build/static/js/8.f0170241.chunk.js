(this["webpackJsonpmint-web-application"]=this["webpackJsonpmint-web-application"]||[]).push([[8],{389:function(e,t,n){},392:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return O}));var r=n(2),a=n.n(r),c=n(5),i=n(95),s=n(393),o=new i.d.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),u=new i.d.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),l=new i.d.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),d=function(e){return new Promise((function(t){return setTimeout(t,e)}))},b=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var i,s,o,u,l,b=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=b.length>3&&void 0!==b[3]?b[3]:"recent",s=b.length>4&&void 0!==b[4]&&b[4],o=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(c.a)(a.a.mark((function e(c,b){var f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){o=!0,u={slot:t.slot,confirmations:0,err:e.err},e.err?(console.log("Rejected via websocket",e.err),b(u)):(console.log("Resolved via websocket",e),c(u))}),i)}catch(a){o=!0,console.error("WS error in setup",t,a)}case 2:if(o||!s){e.next=18;break}return e.prev=3,e.next=6,r.getSignatureStatuses([t]);case 6:f=e.sent,u=f&&f.value[0],o||(u?u.err?(console.log("REST error for",t,u),o=!0,b(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),o=!0,c(u)):console.log("REST confirmations",t,u):console.log("REST null result for",t,u)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),o||console.log("REST connnection error: txid",t,e.t0);case 14:return e.next=16,d(2e3);case 16:e.next=2;break;case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),o=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(t,n,r,a){var c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:i.d.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s.b,isSigner:!1,isWritable:!1},{pubkey:i.d.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new i.d.TransactionInstruction({keys:c,programId:u,data:e.from([])})},p=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,s,u,l,d,b,f,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new i.b(r,t,{preflightCommitment:"recent"}),e.next=3,i.a.fetchIdl(o,c);case 3:return s=e.sent,u=new i.a(s,o,c),l={id:n,connection:r,program:u},e.next=8,u.account.candyMachine.fetch(n);case 8:return d=e.sent,b=d.data.itemsAvailable.toNumber(),f=d.itemsRedeemed.toNumber(),p=b-f,m=d.data.goLiveDate.toNumber(),m=new Date(1e3*m),e.abrupt("return",{candyMachine:l,itemsAvailable:b,itemsRedeemed:f,itemsRemaining:p,goLiveDate:m});case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.d.PublicKey.findProgramAddress([e.from("metadata"),l.toBuffer(),n.toBuffer(),e.from("edition")],l);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.d.PublicKey.findProgramAddress([e.from("metadata"),l.toBuffer(),n.toBuffer()],l);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.d.PublicKey.findProgramAddress([t.toBuffer(),s.b.toBuffer(),n.toBuffer()],u);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,u,d,b,p,O,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.d.Keypair.generate(),e.next=3,y(r,o.publicKey);case 3:return u=e.sent,d=t.connection,b=t.program,e.next=7,j(o.publicKey);case 7:return p=e.sent,e.next=10,m(o.publicKey);case 10:return O=e.sent,e.next=13,d.getMinimumBalanceForRentExemption(s.a.span);case 13:return v=e.sent,e.next=16,b.rpc.mintNft({accounts:{config:n,candyMachine:t.id,payer:r,wallet:c,mint:o.publicKey,metadata:p,masterEdition:O,mintAuthority:r,updateAuthority:r,tokenMetadataProgram:l,tokenProgram:s.b,systemProgram:i.d.SystemProgram.programId,rent:i.d.SYSVAR_RENT_PUBKEY,clock:i.d.SYSVAR_CLOCK_PUBKEY},signers:[o],instructions:[i.d.SystemProgram.createAccount({fromPubkey:r,newAccountPubkey:o.publicKey,space:s.a.span,lamports:v,programId:s.b}),s.c.createInitMintInstruction(s.b,o.publicKey,0,r,r),f(u,r,r,o.publicKey),s.c.createMintToInstruction(s.b,o.publicKey,u,r,[],1)]});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}).call(this,n(10).Buffer)},396:function(e,t){},398:function(e,t,n){},399:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n(13),c=n(0),i=n(99),s=n(142),o=n(425),u=n(414),l=n(428),d=n(423),b=n(318),f=n(312),p=n(391),m=n.n(p),j=n(390),y=n.n(j),O=(n(389),n(21)),v=function(){var e=Object(i.c)((function(e){return e.candy})),t=Object(c.useState)(e),n=Object(a.a)(t,2),p=n[0],j=n[1],v=Object(c.useState)(!1),g=Object(a.a)(v,2),x=g[0],h=g[1],S=Object(i.b)();return Object(O.jsx)("div",{className:"candy__setup",children:x?Object(O.jsxs)("form",{children:[Object(O.jsx)(o.a,{className:"candy__setup-form__item",label:"\u0410\u0434\u0440\u0435\u0441\u0441 \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f (authority)",value:p.treasury,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{treasury:e.target.value})}))}}),Object(O.jsx)(o.a,{className:"candy__setup-form__item",label:"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f (config)",value:p.config,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{config:e.target.value})}))}}),Object(O.jsx)(o.a,{className:"candy__setup-form__item",label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 Candy Machine (candyMachineAddress)",value:p.candyMachineId,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{candyMachineId:e.target.value})}))}}),Object(O.jsx)(o.a,{className:"candy__setup-form__item",label:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 Candy Machine (startDate)",value:p.startDateSeed,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{startDateSeed:e.target.value})}))}}),Object(O.jsxs)(u.a,{className:"candy__setup-form__item",children:[Object(O.jsx)(l.a,{id:"network-cluster",children:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 solana-cluster (env)"}),Object(O.jsxs)(d.a,{labelId:"network-cluster",id:"network-cluster-select",value:p.network,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{network:e.target.value})}))},children:[Object(O.jsx)(b.a,{value:"devnet",children:"devnet"}),Object(O.jsx)(b.a,{value:"mainnet",children:"mainnet"}),Object(O.jsx)(b.a,{value:"testnet",children:"testnet"})]})]}),Object(O.jsxs)(u.a,{className:"candy__setup-form__item",children:[Object(O.jsx)(l.a,{id:"connection-url",children:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 RPC HOST"}),Object(O.jsx)(d.a,{labelId:"connection-url",id:"connection-url-select",value:p.connection,onChange:function(e){return j((function(t){return Object(r.a)(Object(r.a)({},t),{},{connection:e.target.value})}))},children:Object(O.jsx)(b.a,{value:"https://explorer-api.devnet.solana.com",children:"https://explorer-api.devnet.solana.com"})})]}),Object(O.jsxs)("div",{className:"candy__setup-actions",children:[Object(O.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var e;S((e=p,{type:s.a.UPDATE_CANDY_CONFIG,payload:e})),h(!1)},children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c Candy Machine"}),Object(O.jsx)(f.a,{variant:"outlined",onClick:function(){S({type:s.a.RESET_CANDY_CONFIG}),j({})},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(O.jsxs)(f.a,{variant:"outlined",color:"secondary",onClick:function(){return h(!1)},children:["\u0421\u043a\u0440\u044b\u0442\u044c \u043c\u0435\u043d\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",Object(O.jsx)(y.a,{})]})]})]}):Object(O.jsx)("div",{className:"open__setup-button",children:Object(O.jsxs)(f.a,{variant:"outlined",color:"secondary",onClick:function(){return h(!0)},children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",Object(O.jsx)(m.a,{})]})})})},g=n(2),x=n.n(g),h=n(5),S=n(392),_=n(12),k=n(418),w=n(175),A=n(151),T=function(e){return{type:A.a.UPDATE_BALANCE,payload:e}},M=n(417),P=n(424),R=n(422),E=n(397),C=function(e){var t=e.days,n=e.hours,r=e.minutes,a=e.seconds;return Object(O.jsxs)("span",{children:[n+24*(t||0)," hours, ",r," minutes, ",a]})},N=function(e){return Object(O.jsx)(E.a,Object(r.a)(Object(r.a)({},e),{},{renderer:C}))},I="REFRESH_CANDY_MACHINE_STATE",D="SET_IS_SOLD_OUT",K="SET_BALANCE",L="SET_IS_MINTING",B="UPDATE_ALERT_STATE",W="UPDATE_IS_ACTIVE",U=function(e,t){switch(t.type){case I:var n=t.payload,a=n.itemsRemaining,c=n.isSoldOut,i=n.dateStart,s=n.candyMachine;return Object(r.a)(Object(r.a)({},e),{},{itemsRemaining:a,isSoldOut:c,dateStart:i,candyMachine:s});case D:return Object(r.a)(Object(r.a)({},e),{},{isSoldOut:t.payload});case K:return Object(r.a)(Object(r.a)({},e),{},{balance:t.payload});case L:return Object(r.a)(Object(r.a)({},e),{},{isMinting:t.payload});case B:return Object(r.a)(Object(r.a)({},e),{},{alertState:Object(r.a)({},t.payload)});case W:return Object(r.a)(Object(r.a)({},e),{},{isActive:t.payload});default:return e}},Y=function(e){return{type:L,payload:e}},G=function(e){return{type:D,payload:e}},F=function(e){return{type:K,payload:e}},H=function(e){return{type:B,payload:e}},q=function(e){return{type:W,payload:e}},V=(n(398),function(e){var t=e.candyMachineId,n=e.config,r=e.connection,s=e.startDate,o=e.treasury,u=e.txTimeout,l=Object(i.c)((function(e){return e.wallet})),d=Object(i.b)(),b={balance:l.balance,dateStart:new Date(s),isSoldOut:!1,itemsRemaining:0,candyMachine:null,isMinting:!1,isActive:!1,alertState:{open:!1,message:"",severity:void 0}},p=Object(c.useReducer)(U,b),m=Object(a.a)(p,2),j=m[0],y=m[1],v=j.candyMachine,g=j.isMinting,A=j.isSoldOut,E=j.itemsRemaining,C=j.balance,D=j.dateStart,K=j.alertState,L=j.isActive,B=Object(k.a)(),W=function(){return Object(h.a)(x.a.mark((function e(){var n,a,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(S.b)(B,t,r);case 5:n=e.sent,a=n.candyMachine,c=n.goLiveDate,i=n.itemsRemaining,y({type:I,payload:{itemsRemaining:i,isSoldOut:0===i,dateStart:c,candyMachine:a}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))(),function(){!1}},V=function(){var e=Object(h.a)(x.a.mark((function e(){var t,a,c,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y(Y(!0)),!B||!(null===v||void 0===v?void 0:v.program)){e.next=10;break}return e.next=5,Object(S.c)(v,n,B.publicKey,o);case 5:return t=e.sent,e.next=8,Object(S.a)(t,u,r,"singleGossip",!1);case 8:(null===(a=e.sent)||void 0===a?void 0:a.err)?y(H({open:!0,message:"Mint failed! Please try again!",severity:"error"})):y(H({open:!0,message:"Congratulations! Mint succeeded! Check your wallet!",severity:"success"}));case 10:e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),c=e.t0.msg||"Minting failed! Please try again!",e.t0.msg?311===e.t0.code?(c="SOLD OUT!",y(G(!0)),y(Y(!1))):312===e.t0.code&&(c="Minting period hasn`t started yet."):e.t0.message.indexOf("0x138")||(e.t0.message.indexOf("0x137")?c="SOLD OUT!":e.t0.message.indexOf("0x135")&&(c="Insufficient funds to mint. Please fund your wallet.")),y(H({open:!0,message:c,severity:"error"}));case 18:if(e.prev=18,!B){e.next=26;break}return e.next=22,r.getBalance(B.publicKey);case 22:i=e.sent,s=i/_.LAMPORTS_PER_SOL,y(F(s)),d(T(s));case 26:return y(Y(!1)),W(),e.finish(18);case 29:case"end":return e.stop()}}),e,null,[[0,12,18,29]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return Object(h.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=7;break}return e.next=3,r.getBalance(B.publicKey);case 3:t=e.sent,n=t/_.LAMPORTS_PER_SOL,y(F(n)),d(T(n));case 7:case"end":return e.stop()}}),e)})))(),function(){!1}}),[B,r,d]),Object(c.useEffect)(W,[B,t,r]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"mint-container",children:[Object(O.jsx)("div",{className:B?"wallet-info":"description",children:B?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{children:["Your balance - ",C," SOL"]}),A?Object(O.jsx)("p",{className:"sold-info",children:"Sold Out!"}):Object(O.jsxs)("p",{children:["Images remaining - ",E]})]}):Object(O.jsx)("p",{children:"Generate a unique image"})}),B?A?null:Object(O.jsx)(f.a,{variant:"outlined",color:"primary",disabled:g||!L,onClick:V,children:L?g?Object(O.jsx)(M.a,{}):"Mint Token":Object(O.jsx)(N,{date:D,onMount:function(e){return e.completed&&y(q(!0))},onComplete:function(){return y(q(!0))}})}):Object(O.jsx)(w.a,{color:"primary"}),Object(O.jsx)(P.a,{open:K.open,autoHideDuration:6e3,onClose:function(){return y(H({open:!1,message:"",severity:void 0}))},children:Object(O.jsx)(R.a,{onClose:function(){return y(H({open:!1,message:"",severity:void 0}))},severity:K.severity,children:K.message})})]})})}),J=n(155);n(399),t.default=function(){var e=Object(J.a)();return Object(O.jsxs)("div",{className:"mint__wrapper",children:[Object(O.jsx)(v,{}),e&&Object(O.jsx)(V,{candyMachineId:e.candyMachineId,config:e.config,connection:e.connection,startDate:e.startDateSeed,treasury:e.treasury,txTimeout:3e4})]})}}}]);
//# sourceMappingURL=8.f0170241.chunk.js.map