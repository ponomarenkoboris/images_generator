(this["webpackJsonpmint-web-application"]=this["webpackJsonpmint-web-application"]||[]).push([[5],{380:function(e,t,a){},382:function(e,t,a){},383:function(e,t,a){},385:function(e,t,a){},387:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(5),s=a(99),i=a(44),o=function(e,t,a){return{type:i.a.UPDATE_META_PROPERTIES_CREATORS,payload:{isAddress:t,newValue:a,creatorId:e}}},l=function(e){return{type:i.a.UPLOAD_META,payload:e}},u=a(425),j=a(414),d=a(428),b=a(423),p=a(318),f=a(314),O=a(312),v=a(381),h=a.n(v),x=a(362),m="http://127.0.0.1:8000/",_="set-token-metadata/",g="set-algorithm-config/",y="create-assets/",E="get-setup/",C=a.n(x).a.create({baseURL:m,withCredentials:!0}),T=a(7),A=function(e){return new Promise((function(t){var a=e.map((function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){return t({name:e.name,url:n.result})},n.onerror=function(e){return a(e)},n.readAsDataURL(e)}))}));Promise.all(a).then((function(e){t(e.map((function(e,t){return Object(T.a)(Object(T.a)({},e),{},{id:(new Date).getTime()*t})})))})).catch((function(e){throw new Error("Error! ".concat(e))}))}))},N=function(e){return!!"".concat(e).match(/#\d+.png$/)},D=function(e){return isNaN(parseInt(e))?0:parseInt(e)},S=function e(t,a){return Object.values(t).forEach((function(t){"boolean"===typeof t||t||(a=!0),Array.isArray(t)&&(0===t.length&&(a=!0),t.forEach((function(t){return e(t)}))),"object"===typeof t&&(a=e(t,a))})),a},k=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(T.a)(Object(T.a)({},t),{},{metadata:Object(T.a)(Object(T.a)({},t.metadata),{},{properties:Object(T.a)(Object(T.a)({},t.metadata.properties),{},{creators:t.metadata.properties.creators.map((function(e){return{address:e.address,share:e.share}}))})})}),e.prev=1,e.next=4,fetch(m+y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(!(n=e.sent).ok){e.next=17;break}return e.next=8,n.blob();case 8:return c=e.sent,s=window.URL.createObjectURL(c),(i=document.createElement("a")).href=s,i.download="assets",document.body.appendChild(i),i.click(),i.remove(),e.abrupt("return",!0);case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),w=(a(380),a(21)),P=function(){var e=Object(s.c)((function(e){return e.metadata})),t=Object(s.b)(),a=function(){var t=Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object.assign({},e)).properties.creators=a.properties.creators.map((function(e){return{address:e.address,share:e.share}})),t.prev=2,t.next=5,C.post(_,a);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"collectables__setup-metadata",children:[Object(w.jsx)("h2",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 token_metadata"}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{className:"metadata",children:[Object(w.jsx)(u.a,{label:"\u0418\u043c\u044f \u0430\u0440\u0442\u0430 (name)",value:e.name,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_NAME,payload:a}));var a}}),Object(w.jsx)(u.a,{label:"\u0421\u0438\u043c\u0432\u043e\u043b \u0430\u0440\u0442\u0430 (symbol)",value:e.symbol,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_SYMBOL,payload:a}));var a}}),Object(w.jsx)(u.a,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u0440\u0442\u0430 (description)",value:e.description,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_DESCRIPTION,payload:a}));var a}}),Object(w.jsx)(u.a,{label:"\u041f\u0440\u043e\u0446\u043d\u0435\u0442 \u0441 \u043f\u0440\u043e\u0436\u0430\u0434\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f\u043c (seller_fee_basis_points)",type:"number",value:e.seller_fee_basis_points,onChange:function(e){return t((a=D(e.target.value),{type:i.a.UPDATE_META_SELLER,payload:a}));var a}}),Object(w.jsx)(u.a,{label:"\u0418\u043c\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 (collection.name)",value:e.collection.name,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_COLLECTION_NAME,payload:a}));var a}}),Object(w.jsx)(u.a,{label:"\u0421\u0435\u043c\u0435\u0439\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 (collection.family)",value:e.collection.family,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_COLLECTION_FAMILY,payload:a}));var a}}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(d.a,{id:"proreties-category",children:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0430\u0440\u0442\u0430 (properties.category)"}),Object(w.jsxs)(b.a,{labelId:"proreties-category",value:e.properties.category,onChange:function(e){return t((a=e.target.value,{type:i.a.UPDATE_META_PROPERTIES_CATEGORY,payload:a}));var a},children:[Object(w.jsx)(p.a,{value:"image",children:"image"}),Object(w.jsx)(p.a,{value:"audio",children:"audio"}),Object(w.jsx)(p.a,{value:"vr",children:"vr"}),Object(w.jsx)(p.a,{value:"html",children:"html"})]})]})]}),Object(w.jsx)("div",{className:"creators__wrapper",children:e.properties.creators.map((function(e,a){var n=e.id,r=e.address,c=e.share;return Object(w.jsxs)("div",{className:"creator",children:[Object(w.jsxs)("div",{className:"creator__info",children:[Object(w.jsx)(u.a,{label:"\u0410\u0434\u0440\u0435\u0441\u0441 \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f (creator.address)",value:r,onChange:function(e){return n&&t(o(n,!0,e.target.value))}}),Object(w.jsx)(u.a,{label:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f (creator.share)",type:"number",value:c,onChange:function(e){return n&&t(o(n,!1,D(e.target.value)))}})]}),Object(w.jsx)("div",{className:"creator__action",children:Object(w.jsx)(f.a,{onClick:function(){return n&&t(function(e){return{type:i.a.REMOVE_META_PROPERTIES_CREATORS,payload:e}}(n))},children:Object(w.jsx)(h.a,{})})})]},n||(new Date).getTime()+a)}))}),Object(w.jsxs)("div",{className:"form__actions",children:[Object(w.jsx)(O.a,{onClick:function(){return t((e={address:"",share:0,id:(new Date).getTime()},{type:i.a.ADD_META_PROPERTIES_CREATORS,payload:e}));var e},variant:"outlined",color:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f (properties.creators)"}),Object(w.jsx)(O.a,{variant:"contained",color:"primary",onClick:a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043c\u0435\u0442\u0430\u0434\u0430\u0442\u044b"})]})]})]})},I=a(77),R=function(e,t){return{type:I.a.UPDATE_IMAGE_SIZE,payload:{isHeight:e,newValue:t}}},U=(a(382),function(){var e=Object(s.c)((function(e){return e.outputConf})),t=Object(s.b)(),a=function(){var t=Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.post(g,e);case 3:a=t.sent,console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"collecrables__setup-output__conf",children:[Object(w.jsx)("h2",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 output_image_configuration"}),Object(w.jsxs)("div",{className:"output__conf",children:[Object(w.jsxs)("form",{children:[Object(w.jsx)(u.a,{variant:"outlined",label:"\u041a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439",type:"number",value:e.images_count,onChange:function(e){return t((a=D(e.target.value),{type:I.a.UPDATE_IMAGES_COUNT,payload:a}));var a}}),Object(w.jsx)(u.a,{variant:"outlined",label:"\u0428\u0438\u0440\u0438\u043d\u0430",type:"number",value:e.size.width,onChange:function(e){return t(R(!1,D(e.target.value)))}}),Object(w.jsx)(u.a,{variant:"outlined",label:"\u0412\u044b\u0441\u043e\u0442\u0430",type:"number",value:e.size.height,onChange:function(e){return t(R(!0,D(e.target.value)))}}),Object(w.jsx)(u.a,{variant:"outlined",label:"\u0412\u0440\u0435\u043c\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u0441\u0435\u043a. (false - \u043d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447.)",value:e.time_limit,onChange:function(e){return t((a=D(e.target.value)||!1,{type:I.a.UPDATE_TIMEOUT,payload:a}));var a}}),Object(w.jsxs)(j.a,{className:"form__select",children:[Object(w.jsx)(d.a,{id:"sequences_inuque",children:"\u0410\u0440\u0442\u044b \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b"}),Object(w.jsxs)(b.a,{labelId:"sequences_inuque",value:e.sequences_is_unique,variant:"outlined",onChange:function(e){return t((a=e.target.value,{type:I.a.UPDATE_SEQUENCES_UNIQUE,payload:a}));var a},children:[Object(w.jsx)(p.a,{value:"true",children:"true"}),Object(w.jsx)(p.a,{value:"false",children:"false"})]})]}),Object(w.jsx)(u.a,{variant:"outlined",label:"\u0424\u043e\u043d\u043e\u0432\u044b\u0439 \u0446\u0432\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 (rgba)",onChange:function(e){return t((a=e.target.value,{type:I.a.UPDATE_BACKGROUND_COLOR,payload:a}));var a},value:e.backgroud_color_rgba})]}),Object(w.jsx)("div",{className:"output__conf-actions",children:Object(w.jsx)(O.a,{variant:"contained",color:"primary",onClick:a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430"})})]})]})}),L=a(13),M=a(0),F=a(70),q=function(e){return{type:F.a.DOWNLOAD_SLICES,payload:e}},G=a(429),J=a(415),V=a(416),Y=a(417),z=a(384),B=a.n(z),Q=(a(383),function(e){var t=e.folderId,a=e.imagesDropped,n=Object(M.useRef)(null),r=Object(M.useState)(!1),c=Object(L.a)(r,2),s=c[0],i=c[1],o=function(e,t){e.preventDefault(),i(t)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("input",{className:"file__input",type:"file",ref:n,accept:"image/png",onChange:function(e){e.preventDefault(),a(t,e.target.files)},multiple:!0}),Object(w.jsx)("div",{className:"drag__upload-area",onDragStart:function(e){return o(e,!0)},onDragLeave:function(e){return o(e,!1)},onDragOver:function(e){return o(e,!0)},onDrop:function(e){return function(e){e.preventDefault(),a(t,e.dataTransfer.files),i(!1)}(e)},onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.click()},children:Object(w.jsxs)("div",{className:"upload-area__inner",children:[Object(w.jsx)(B.a,{}),Object(w.jsx)("p",{children:s?"\u041e\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f":"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u043b\u0435"})]})})]})}),H=a(352),K=a.n(H),W=a(351),Z=a.n(W),$=a(350),X=a.n($),ee=function(e){var t=e.name,a=e.url,n=e.id,r=e.folderId,c=Object(M.useState)(!1),i=Object(L.a)(c,2),o=i[0],l=i[1],j=Object(M.useState)(t),d=Object(L.a)(j,2),b=d[0],p=d[1],O=Object(M.useState)(N(b)),v=Object(L.a)(O,2),h=v[0],x=v[1],m=Object(s.b)();Object(M.useEffect)((function(){x(N(b))}),[b]);return Object(w.jsxs)("div",{className:"file__wrapper",children:[Object(w.jsx)("img",{src:a,alt:"Asset"}),Object(w.jsxs)("div",{className:"file__name",style:{color:h?"initial":"red"},children:[o?Object(w.jsx)(u.a,{value:b,onChange:function(e){return p(e.target.value)}}):b,Object(w.jsx)("span",{children:!h&&"\u041f\u0440\u0438\u043c\u0435\u0440 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430: \u0438\u043c\u044f_\u0444\u0430\u0439\u043b\u0430#\u043f\u0440\u043e\u0446\u0435\u043d\u0442_\u0432\u044b\u043f\u0430\u0434\u0430\u043d\u0438\u044f.png"})]}),Object(w.jsx)("div",{className:"file__actions",children:o?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(f.a,{onClick:function(){var e;b!==t&&(m((e={folderId:r,assetId:n,name:b},{type:F.a.UPDATE_ASSET_NAME,payload:e})),l(!1))},children:Object(w.jsx)(X.a,{})})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.a,{onClick:function(){return l(!0)},children:Object(w.jsx)(Z.a,{})}),Object(w.jsx)(f.a,{onClick:function(){return m((e={folderId:r,assetId:n},{type:F.a.DELETE_ASSET,payload:e}));var e},children:Object(w.jsx)(K.a,{})})]})})]})},te=a(174),ae=a.n(te),ne=a(386),re=a.n(ne),ce=(a(385),function(){var e=Object(s.c)((function(e){return{metadata:e.metadata,outputConf:e.outputConf,assetsSlices:e.assetsSlices}})),t=Object(s.b)(),a=Object(M.useState)({}),n=Object(L.a)(a,2),i=n[0],o=n[1],l=Object(M.useState)(!1),j=Object(L.a)(l,2),d=j[0],b=j[1],p=Object(M.useState)(!1),v=Object(L.a)(p,2),h=v[0],x=v[1];Object(M.useEffect)((function(){b(function(e){var t=!1,a=e.metadata,n=e.assetsSlices,r=e.outputConf;if(t=S(a))return t;if(t=S(r))return t;if(0!==n.length)for(var c=[],s=0;s<e.assetsSlices.length;s++){var i=e.assetsSlices[s];if(t=-1!==c.indexOf(i.folderName),0===i.assets.length&&(t=!0),t)break;for(var o=0;o<i.assets.length;o++)if(!N(i.assets[o].name)){t=!0;break}}else t=!0;return t}(e))}),[e]);var m=function(){var e;0!==Object.entries(i).length&&(delete i.isChanging,t((e=i,{type:F.a.UPDATE_FOLDER,payload:e}))),o({})},_=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.prev=1,t.next=4,k(e);case 4:x(!1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),x(!1);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(r.a.mark((function e(a,n){var c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],s=0;s<n.length;s++)c.push(n[s]);return e.next=4,A(c);case 4:i=e.sent,t((r={folderId:a,assets:i},{type:F.a.UPDATE_ASSETS,payload:r}));case 6:case"end":return e.stop()}var r}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"assets__slices",children:[Object(w.jsxs)("div",{className:"assets",children:[Object(w.jsxs)("div",{className:"assets__header",children:[Object(w.jsx)("h2",{children:"\u041f\u0430\u043f\u043a\u0438 \u0441 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u043c\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c\u0438"}),Object(w.jsx)(O.a,{className:"append__bottom",onClick:function(){return t({type:F.a.ADD_FOLDER})},variant:"outlined",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443"})]}),e.assetsSlices.map((function(e){var a=e.id,n=e.folderName,r=e.assets;return Object(w.jsxs)("div",{className:"folder__wrapper",children:[Object(w.jsxs)(G.a,{children:[Object(w.jsx)(J.a,{expandIcon:Object(w.jsx)(ae.a,{}),children:i.isChanging&&i.id===a?Object(w.jsx)(u.a,{variant:"outlined",value:i.folderName?i.folderName:n,onChange:function(e){return o((function(t){return Object(T.a)(Object(T.a)({},t),{},{folderName:e.target.value})}))},onClick:function(e){return e.stopPropagation()}}):n}),Object(w.jsx)(V.a,{children:Object(w.jsxs)("div",{className:"assets__list",children:[r.map((function(e){return Object(w.jsx)(ee,Object(T.a)(Object(T.a)({},e),{},{folderId:a}),e.id)})),Object(w.jsx)(Q,{folderId:a,imagesDropped:g})]})})]}),Object(w.jsx)("div",{className:"folder__actions",children:i.isChanging&&i.id===a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.a,{onClick:function(){return m()},children:Object(w.jsx)(X.a,{})}),Object(w.jsx)(f.a,{onClick:function(){return o({})},children:Object(w.jsx)(re.a,{})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.a,{onClick:function(){return o((function(e){return Object(T.a)(Object(T.a)({},e),{},{isChanging:!0,id:a})}))},children:Object(w.jsx)(Z.a,{})}),Object(w.jsx)(f.a,{onClick:function(){return t(function(e){return{type:F.a.DELETE_FOLDER,payload:e}}(a))},children:Object(w.jsx)(K.a,{})})]})})]},a)}))]}),Object(w.jsx)("div",{className:"assets__actions",children:Object(w.jsx)(O.a,{variant:"outlined",className:"generate__button",disabled:d,onClick:_,children:h?Object(w.jsx)(Y.a,{}):"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e"})})]})}),se=a(388),ie=a.n(se);a(387),t.default=function(){var e=Object(s.b)(),t=function(){var t=Object(c.a)(r.a.mark((function t(){var a,n,c,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.get(E);case 3:(a=t.sent).data&&(n=a.data,c=n.metadata,s=n.outputConf,i=n.assetsSlices,s&&e((r=s,{type:I.a.UPLOAD_CONF,payload:r})),c&&e(l(c)),i&&e(q(i))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}var r}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"collectables__setup",children:[Object(w.jsx)("div",{className:"download__setup",children:Object(w.jsxs)(O.a,{variant:"outlined",onClick:t,children:[Object(w.jsx)(ie.a,{}),Object(w.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"})]})}),Object(w.jsxs)("div",{className:"root__configuration",children:[Object(w.jsx)(P,{}),Object(w.jsx)(U,{})]}),Object(w.jsx)(ce,{})]})}}}]);
//# sourceMappingURL=5.e404365d.chunk.js.map